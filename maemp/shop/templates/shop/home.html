{% extends 'shop/base.html' %}

{% block title %} Home {% endblock %}

{% block content %}
    <nav class="navbar navbar-expand-md navbar-dark fixed-top bg-dark">
        <a class="navbar-brand" href="#">Maestro Emporium</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarsExampleDefault"
                aria-controls="navbarsExampleDefault" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
    </nav>

    <main role="main">

        <!-- Main jumbotron for a primary marketing message or call to action -->
        <div class="jumbotron">
            <div class="container">
                <h1 class="display-3">Maestro Emporium</h1>
                <h3>Cart Problem</h3>
                <h4>Step 2/3</h4>
                <p>In this step, one needs to be able to add 5 items to a cart, then 3 more before seeing the
                    correct item count and total</p>
                <p><a data-toggle="collapse" href="#collapseStep2" role="button" aria-expanded="false"
                      aria-controls="collapseStep2">Excercise details &raquo;</a></p>
                <div class="collapse" id="collapseStep2">
                    <div class="card card-body">
                        <p>Given:</p>
                        <ul>
                            <li>
                                An empty shopping cart
                            </li>
                            <li>
                                And a product, Dove Soap with a unit price of 39.99
                            </li>
                        </ul>


                        <p>When:</p>

                        <ul>
                            <li>The user adds 5 Dove Soaps to the shopping cart</li>
                            <li>And then adds another 3 Dove Soaps to the shopping cart</li>
                        </ul>
                        <p>Then:</p>

                        <ul>
                            <li>The shopping cart should contain 8 Dove Soaps each with a unit price of 39.99</li>
                            <li>And the shopping cart’s total price should equal 319.92</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <div class="container">
            <!-- Example row of columns -->
            <div class="row">
                <div class="col-md-9">
                    {% for product in products %}
                        <div class="col-md-4">
                            <h2>{{ product.name }}</h2>
                            <p>£{{ product.item_price|floatformat:"-2" }}</p>
                            <p><a class="btn btn-secondary"
                                  href="{% url 'add_to_cart' product_id=product.pk quantity=5 %}" role="button">Add 5 to
                                cart &raquo;</a>
                            </p>
                            <p>
                                <a class="btn btn-secondary"
                                   href="{% url 'add_to_cart' product_id=product.pk quantity=3 %}" role="button">Add 3
                                    more to cart &raquo;</a>
                            </p>
                        </div>
                    {% empty %}
                        <div class="col-md-12">
                            <h4>No products.</h4>
                        </div>
                    {% endfor %}
                </div>
                <div class="col-md-3">
                    <div class="col-md-12">
                        <h2>Cart <i class="bi bi-cart2"></i></h2>
                        <p>Items</p>
                        <div>
                            <ul>
                                {% for item in cart.cartitem_set.all %}
                                    <li>{{ item }}</li>
                                {% empty %}
                                    <p>No items.</p>
                                {% endfor %}
                            </ul>
                        </div>
                        <p>Total items in cart - {{ cart.items_in_cart|default:'0' }}</p>
                        <p>Cart Total - £{{ cart.cart_total|default:'0.00' }}</p>

                    </div>
                </div>
            </div>

            <hr>

        </div> <!-- /container -->

    </main>

    <footer class="container">
        <p>&copy; virbose.tech 2021</p>
    </footer>
{% endblock %}